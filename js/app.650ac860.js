(function(e){function n(n){for(var r,c,i=n[0],u=n[1],s=n[2],d=0,f=[];d<i.length;d++)c=i[d],Object.prototype.hasOwnProperty.call(o,c)&&o[c]&&f.push(o[c][0]),o[c]=0;for(r in u)Object.prototype.hasOwnProperty.call(u,r)&&(e[r]=u[r]);l&&l(n);while(f.length)f.shift()();return a.push.apply(a,s||[]),t()}function t(){for(var e,n=0;n<a.length;n++){for(var t=a[n],r=!0,i=1;i<t.length;i++){var u=t[i];0!==o[u]&&(r=!1)}r&&(a.splice(n--,1),e=c(c.s=t[0]))}return e}var r={},o={app:0},a=[];function c(n){if(r[n])return r[n].exports;var t=r[n]={i:n,l:!1,exports:{}};return e[n].call(t.exports,t,t.exports,c),t.l=!0,t.exports}c.m=e,c.c=r,c.d=function(e,n,t){c.o(e,n)||Object.defineProperty(e,n,{enumerable:!0,get:t})},c.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},c.t=function(e,n){if(1&n&&(e=c(e)),8&n)return e;if(4&n&&"object"===typeof e&&e&&e.__esModule)return e;var t=Object.create(null);if(c.r(t),Object.defineProperty(t,"default",{enumerable:!0,value:e}),2&n&&"string"!=typeof e)for(var r in e)c.d(t,r,function(n){return e[n]}.bind(null,r));return t},c.n=function(e){var n=e&&e.__esModule?function(){return e["default"]}:function(){return e};return c.d(n,"a",n),n},c.o=function(e,n){return Object.prototype.hasOwnProperty.call(e,n)},c.p="";var i=window["webpackJsonp"]=window["webpackJsonp"]||[],u=i.push.bind(i);i.push=n,i=i.slice();for(var s=0;s<i.length;s++)n(i[s]);var l=u;a.push([0,"chunk-vendors"]),t()})({0:function(e,n,t){e.exports=t("56d7")},"034f":function(e,n,t){"use strict";t("85ec")},"56d7":function(e,n,t){"use strict";t.r(n);t("e260"),t("e6cf"),t("cca6"),t("a79d");var r=t("2b0e"),o=function(){var e=this,n=e.$createElement,t=e._self._c||n;return t("div",{attrs:{id:"app"}},[t("a",{on:{click:e.onClick}},[e._v("click")]),t("div",{attrs:{id:"barcode_type"}},[e._v("---")]),e._v(" "),t("div",{attrs:{id:"barcode"}},[e._v("---")]),t("div",{attrs:{id:"raw_matrial"}},[e._v(e._s(e.raw_matrial))]),t("div",{staticClass:"viewport",attrs:{id:"photo-area"}})])},a=[],c=t("1da1"),i=(t("96cf"),t("1157")),u=t.n(i),s=t("8a00"),l=t.n(s),d={name:"App",data:function(){return{raw_matrial:""}},watch:{raw_matrial:function(e){if(""!==e){var n=window.confirm("取得した原材料：　"+e+"\n\n撮影を終了する");n?window.location.href="https://corona-lab.tech/cl/counseling/1":this.raw_matrial=""}}},mounted:function(){var e=this;this.mTest(),u()((function(){r()}));var n=0,t="00000000",r=function(){var r=e;l.a.init({inputStream:{name:"Live",type:"LiveStream",target:document.querySelector("#photo-area"),constraints:{decodeBarCodeRate:3,successTimeout:500,codeRepetition:!0,tryVertical:!0,frameRate:15,width:640,height:480,facingMode:"environment"}},decoder:{readers:["ean_reader"]}},(function(e){e?console.log(e):(console.log("Initialization finished. Ready to start"),l.a.start(),_scannerIsRunning=!0)})),l.a.onProcessed((function(e){l.a.canvas.ctx.overlay,l.a.canvas.dom.overlay})),l.a.onDetected((function(e){if(console.log(e.codeResult.code),document.getElementById("barcode_type").innerText=e.codeResult.format,document.getElementById("barcode").innerText=e.codeResult.code,t!=e.codeResult.code&&(t=e.codeResult.code,0==n)){n=1;var o=new XMLHttpRequest;o.open("GET","https://corona-lab.tech/api/v1/healthy_products/barcode/"+e.codeResult.code),o.onreadystatechange=function(){n=0;var e=JSON.parse(o.responseText);r.raw_matrial=e[0].raw_material},o.send()}}))}},methods:{mTest:function(){var e=this;return Object(c["a"])(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.next=2,e.$store.dispatch("signIn");case 2:case"end":return n.stop()}}),n)})))()},onClick:function(){this.raw_matrial=this.raw_matrial+"0"}}},f=d,p=(t("034f"),t("2877")),h=Object(p["a"])(f,o,a,!1,null,null,null),g=h.exports,v=t("2f62"),m=t("d4ec"),b=t("bee2"),k=(t("99af"),t("d3b7"),t("bc3a")),w=t.n(k),_="https://corona-lab.tech/api/v2",T=w.a.create({baseURL:_,timeout:3e4});T.interceptors.request.use((function(e){console.group(">>> REQ [".concat(e.method.toUpperCase(),"] ").concat(e.url)),console.dir(e),console.groupEnd();var n=q.getters.headerConfig;return e.headers["auto-login-token"]=n.headers["auto-login-token"],e.headers["access-token"]=n.headers["access-token"],e.headers["client"]=n.headers["client"],e.headers["uid"]=n.headers["uid"],e}),(function(e){return Promise.reject(e)})),T.interceptors.response.use((function(e){return console.group("<<< RES [".concat(e.config.method.toUpperCase(),"] ").concat(e.config.url)),console.dir(e),console.groupEnd(),e}));var y={get:function(e){return T.get(_+e).then((function(e){return e})).catch((function(e){return e}))},post:function(e,n){return T.post(_+e,n).then((function(e){return e})).catch((function(e){return e}))},put:function(e,n){return T.put(_+e,n).then((function(e){return e})).catch((function(e){return e}))},patch:function(e,n){return T.patch(_+e,n).then((function(e){return e})).catch((function(e){return e}))},delete:function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return n?T.delete(_+e,{data:n}).then((function(e){return e})).catch((function(e){return e})):T.delete(_+e).then((function(e){return e})).catch((function(e){return e}))}},x=y,R="/auth",O=function(){function e(){Object(m["a"])(this,e)}return Object(b["a"])(e,[{key:"signIn",value:function(){var e=Object(c["a"])(regeneratorRuntime.mark((function e(){var n,t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=R+"/guest/sign_in?guest_user_id=72",e.next=3,x.post(n);case 3:if(t=e.sent,201!==t.status){e.next=8;break}return e.abrupt("return",{accessToken:t.data["confirm_infomation"]["access-token"],client:t.data["confirm_infomation"]["client"],uid:t.data["confirm_infomation"]["uid"],autoLoginToken:t.data["auto_login_token"]});case 8:return e.abrupt("return",null);case 9:case"end":return e.stop()}}),e)})));function n(){return e.apply(this,arguments)}return n}()}]),e}(),j=t("852e"),E=t.n(j),L="accessToken",S="client",C="uid",P="autoLoginToken";function A(e){var n=e.accessToken,t=e.client,r=e.uid,o=e.autoLoginToken,a=e.time,c=void 0===a?365:a;E.a.set(L,n,{expires:c}),E.a.set(S,t,{expires:c}),E.a.set(C,r,{expires:c}),E.a.set(P,o,{expires:c})}var I={state:{accessToken:null,client:null,uid:null,autoLoginToken:null},mutations:{SET_HEADER:function(e,n){var t=n.accessToken,r=n.client,o=n.uid,a=n.autoLoginToken;e.accessToken=t,e.client=r,e.uid=o,e.autoLoginToken=a}},actions:{signIn:function(e){return Object(c["a"])(regeneratorRuntime.mark((function n(){var t,r,o,a;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return t=e.dispatch,r=new O,n.next=4,r.signIn();case 4:if(o=n.sent,!o){n.next=12;break}return a={accessToken:o.accessToken,client:o.client,uid:o.uid,autoLoginToken:o.autoLoginToken},A(a),t("setAuthHeader",a),n.abrupt("return",o);case 12:return n.abrupt("return",null);case 13:case"end":return n.stop()}}),n)})))()},setAuthHeader:function(e,n){var t=e.commit,r=n.accessToken,o=n.client,a=n.uid,c=n.autoLoginToken;t("SET_HEADER",{accessToken:r,client:o,uid:a,autoLoginToken:c})}},getters:{headerConfig:function(e){return{headers:{"access-token":e.accessToken,client:e.client,uid:e.uid,"auto-login-token":e.autoLoginToken}}}}},M=I;r["a"].use(v["a"]);var H=new v["a"].Store({state:{},mutations:{},modules:{auth:M},getters:{},actions:{}}),q=H,B=t("9483");Object(B["a"])("".concat("","service-worker.js"),{ready:function(){console.log("App is being served from cache by a service worker.\nFor more details, visit https://goo.gl/AFskqB")},registered:function(){console.log("Service worker has been registered.")},cached:function(){console.log("Content has been cached for offline use.")},updatefound:function(){console.log("New content is downloading.")},updated:function(){console.log("New content is available; please refresh.")},offline:function(){console.log("No internet connection found. App is running in offline mode.")},error:function(e){console.error("Error during service worker registration:",e)}}),r["a"].config.productionTip=!1,new r["a"]({render:function(e){return e(g)},store:q}).$mount("#app")},"85ec":function(e,n,t){}});
//# sourceMappingURL=app.650ac860.js.map